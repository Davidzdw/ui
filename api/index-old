<!doctype html>
<html>
<head>
  <meta charset='utf-8' />
  <title>  | Documentation</title>
  <meta name='viewport' content='width=device-width,initial-scale=1'>
  <link href="https://fonts.googleapis.com/css?family=Muli:400,700" rel="stylesheet">
  <script src="jquery.js"></script>
  <link rel='stylesheet' href='../docs/source/prism/prism.css' />
  <script src="../docs/source/prism/prism.js"></script>
  <script src="js/moustache.min.js"></script>
  <script src="../dist/mt.js"></script>
</head>
<body class='documentation'>

  <div id="sidebar" onmouseover="document.body.style.overflow='hidden';" onmouseout="document.body.style.overflow='auto';">

    <h2>Getting Started</h2>
    <a href="">Creating Interfaces</a><br />
    <a href="">Creating a Rack</a><br />

    <h2>Interfaces</h2>

    <h3>Core</h3>
    <a href="javascript:doc('Button')">mt.button</a><br />
    <a href="javascript:doc('Dial')">mt.dial</a><br />
    <a href="javascript:doc('Number')">mt.number</a><br />
    <a href="javascript:doc('Position')">mt.position</a><br />
    <a href="javascript:doc('Slider')">mt.slider</a><br />
    <a href="javascript:doc('Toggle')">mt.toggle</a><br />

    <h3>General</h3>
    <a href="javascript:doc('Envelope')">mt.envelope</a><br />
    <a href="javascript:doc('Matrix')">mt.matrix</a><br />
    <a href="javascript:doc('Multislider')">mt.multislider</a><br />
    <a href="javascript:doc('Piano')">mt.piano</a><br />
    <a href="javascript:doc('RadioButton')">mt.radiobutton</a><br />
    <a href="javascript:doc('Range')">mt.range</a><br />
    <a href="javascript:doc('TextButton')">mt.textbutton</a><br />
    <a href="javascript:doc('Waveform')">mt.waveform</a><br />


    <h3>Mobile</h3>
    <a href="javascript:doc('Tilt')">mt.tilt</a><br />

    <h3>Spatialization</h3>
    <a href="javascript:doc('Pan')">mt.pan</a><br />
    <a href="javascript:doc('Pan3D')">mt.pan3d</a><br />

    <h3>Visualization</h3>
    <a href="javascript:doc('Meter')">mt.meter</a><br />
    <a href="javascript:doc('Oscilloscope')">mt.oscilloscope</a><br />
    <a href="javascript:doc('Spectragram')">mt.spectragram</a><br />


    <h2>Tuning</h2>
    <a href="javascript:tut('note')">mt.note</a><br />
    <a href="javascript:tut('tune')">mt.tune</a><br />

    <h2>Timing</h2>
    <a href="javascript:tut('interval')">mt.interval</a><br />

    <h2>Models</h2>
    <a href="javascript:doc('counter')">mt.counter</a><br />
    <a href="javascript:doc('sequence')">mt.sequence</a><br />
    <a href="javascript:doc('drunk')">mt.drunk</a><br />
    <a href="javascript:doc('matrix')">mt.matrix</a><br />

    <h2>Helpers</h2>
    <a href="javascript:doc('ri')">mt.ri (random integer)</a><br />
    <a href="javascript:doc('rf')">mt.rf (random float)</a><br />
    <a href="javascript:doc('clip')">mt.clip</a><br />
    <a href="javascript:doc('scale')">mt.scale</a><br />
    <a href="javascript:doc('mtof')">mt.mtof</a><br />
    <a href="javascript:doc('interp')">mt.interp</a><br />
    <a href="javascript:doc('pick')">mt.pick</a><br />
    <a href="javascript:doc('octave')">mt.octave</a><br />
    <a href="javascript:doc('cycle')">mt.cycle</a><br />
    <a href="javascript:doc('average')">mt.average</a><br />
  </div>

  <div id="tutorial" class="tutorial">

    <div id="target"></div>

    <script id="template" type="x-tmpl-mustache">
    <h2>{{ name }}</h2>

    <div class="overview" >
    {{ description }}
    <br /><br />
    {{{ demo }}}
    </div>


    {{#examples}}
      <div class="code-basic">
        {{title}}:
        <pre class="property-example"><code class="language-javascript">{{ description }}</code></pre>
      </div>
    {{/examples}}


    <div class="output">
      <h4>Data Output</h4>
      {{{ output }}}
    </div>


    <div class="properties">

      <h4>Properties</h4>

      {{#properties}}
        <div class="property-name">{{ name }}</div>
        <div class="property-type">{{ type }}</div>
        <div class="property-description">{{ description }}</div>
        {{ #example }}
          <pre class="property-example"><code class="language-javascript">{{ code }}</code></pre>
        {{ /example }}
      {{/properties}}

    </div>

    <div class="methods">

      <h4>Methods</h4>

      {{#methods}}
        <div class="method-name">{{ name }}(
          {{#parameters}}
            {{name}}{{^last}}, {{/last}}
          {{/parameters}}
        )</div>
        <div class="method-description">{{ description }}</div>
        {{ #example }}
          <pre class="method-example"><code class="language-javascript">{{ code }}</code></pre>
        {{ /example }}
      {{/methods}}

    </div>

    <div class="examples">

      {{#tutorials}}
        <div class="example">
          <h3>Example: {{name}}</h3>
          {{{codepen}}}
          {{description}}
        </div>
      {{/tutorials}}

    </div>

    </script>

  </div>

</body>

<script>

  var Unformatted = {}
  var API = {}

  $.getJSON('api.json', function(data) {
    data.forEach(function(entry) {
      Unformatted[entry.name] = entry
    })
    console.log(Unformatted)

    for (var key in Unformatted) {
      var unformatted = Unformatted[key]
      var entry = {
        name: unformatted.name,
        examples: unformatted.examples
      }
      var exampleTypes = ['Basic', 'Options']
      if (entry.examples) {
        for (var i=0; i<entry.examples.length;i++) {
          entry.examples[i].title = exampleTypes[i];
        }
      }
      for (var i=0; i<unformatted.tags.length;i++) {
        entry[unformatted.tags[i].title] = unformatted.tags[i].description
      }

      // collect members
      var members = unformatted.members.instance

      //get inherited members
      if (unformatted.augments) {
        for (var i=0; i<unformatted.augments.length;i++) {
          let name = unformatted.augments[i].name
          if (name != "EventEmitter") {
            members = members.concat(Unformatted[name].members.instance)
            if (Unformatted[name].augments) {
              unformatted.augments.push( Unformatted[name].augments[0] )
            }
          }
        }
      }

      //sort members
      entry.properties = []
      entry.methods = []
      for (var i=0; i<members.length;i++) {
        if (members[i].kind=="function") {
          var method = {
            name: members[i].name,
            parameters: [],
            description: members[i].description.children[0].children[0].value,
            returns: false,
            example: false,
          }
          for (var j=0; j<members[i].tags.length; j++) {
            var tag = members[i].tags[j]
            switch (tag.title) {
              case 'type':
                method.type = tag.type.name
                break;
              case 'example':
                method.example = {
                  code: tag.description
                }
                break;
            }
          }
          /*  parameters */
          if (members[i].params) {
            for (var j=0; j<members[i].params.length; j++) {
              method.parameters.push({
                name: members[i].params[j].name
              //  type: members[i].params[j].name,
              })
            }
            method.parameters[ method.parameters.length - 1 ].last = true;
          }

          entry.methods.push(method)
        } else {
          var property = {
            name: members[i].name,
            description: members[i].description.children[0].children[0].value,
            type: '',
            example: false
          }
          for (var j=0; j<members[i].tags.length; j++) {
            var tag = members[i].tags[j]
            switch (tag.title) {
              case 'type':
                property.type = tag.type.name
                break;
              case 'example':
                property.example = {
                  code: tag.description
                }
                break;
            }
          }
          entry.properties.push(property);
        }
      }

      /* alphabetize members */
    //  for (var i=0; i<entry.properties.length;i++) {
        entry.properties.sort(function(a, b) {
            return a.name.localeCompare(b.name);
        });
            entry.methods.sort(function(a, b) {
                return a.name.localeCompare(b.name);
            });
    //  }



      entry.tutorials = []
      for (var i=0; i<unformatted.tags.length;i++) {
        if (unformatted.tags[i].title == 'tutorial') {
          var contents = unformatted.tags[i].description
          var name = contents.split("\n")[0]
          var codepen = contents.split("\n")[1]
          var description = contents.split("\n")[2]
          entry.tutorials.push( {
            description: description,
            name: name,
            codepen: '<p data-height="265" data-theme-id="0" data-slug-hash="'+codepen+'" data-default-tab="js,result" data-user="taylorbf" data-embed-version="2" data-pen-title="'+codepen+'" class="codepen">See the Pen <a href="http://codepen.io/taylorbf/pen/'+codepen+'/">'+codepen+'</a> by Ben Taylor (<a href="http://codepen.io/taylorbf">@taylorbf</a>) on <a href="http://codepen.io">CodePen</a>.</p><scr'+'ipt async src="https://production-assets.codepen.io/assets/embed/ei.js"></scr'+'ipt>'
          })
        }
      }



      API[key] = entry
    }
  });

  function doc(name) {
    var entry = API[name];
    var template = $('#template').html();
    Mustache.parse(template);   // optional, speeds up future uses
    var rendered = Mustache.render(template, entry);
    $('#target').html(rendered);
    Prism.highlightAll();
    mt.rack("target");
  }
</script>
<script>

function loadUser() {
  var template = $('#template').html();
  Mustache.parse(template);   // optional, speeds up future uses
  var rendered = Mustache.render(template, {name: "Luke"});
  $('#target').html(rendered);
}


</script>
<style>

  body {
    font-family: 'Muli', courier;
    padding:0;
    margin:0;
  }

  #sidebar {
    position:absolute;
    width:225px;
    padding:10px 20px 20px;
    box-sizing:border-box;
  }
  #tutorial {
    width: calc(100% - 225px)
    float:left;
  }

  h1, h2, h3 {
    line-height: 1em;
    padding:0;
    font-weight:700;
  }
  h1 {
    margin:20px 0px 5px;
  }
  h2 {
    margin:20px 0px 5px;
    font-size:20px;
  }
  h3 {
    margin:10px 0px 5px;
    font-size:16px;
  }
  a {
    line-height:1.3em;
    color:#555;
    text-decoration:none;
  }
  a:hover {
    text-decoration:underline;
  }



  /* Doc Tutorial Entry */
  .tutorial {
  	margin-left: 225px;
  	width: calc(100% - 200);
  	padding:0px 20px;
  	height:100%;
  	overflow:auto;
  	box-sizing:border-box;
  	font-weight: 400;
  	font-size:15px;
  }

  .tutorial .overview {
  	padding-bottom:20px;
  }

  .tutorial h2 {
  	font-size:35px;
  }
  .tutorial h3 {
  	font-size:30px;
  }
  .tutorial h4 {
  	font-size:30px;
    margin:0px;
  }

  .tutorial .output, .tutorial .properties, .tutorial .methods, .tutorial .example {
  	border-top: solid 2px #ccc;
  	margin-top:30px;
  	padding:30px 0px 0px;
  }

  .tutorial .property-name, .tutorial .method-name {
  	font-weight:700;
  	padding:30px 20px 0px 0px;
  	font-size: 22px;
  	display:inline-block;

  }
  .tutorial .property-type, .tutorial .method-type {
  	display:inline-block;
  	font-style:italic;
  	color:#aaa;
  }
  .tutorial .property-description, .tutorial .method-description {
  	padding:5px 0px;
  	font-size:15px;
  	color:#333;
  	letter-spacing: 0.2px;
  }
  .tutorial .property-example, .tutorial .method-example {
  	padding:20px;
  }

</style>
</html>
